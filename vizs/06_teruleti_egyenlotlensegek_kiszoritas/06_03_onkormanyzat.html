<!DOCTYPE html>
<html>
<meta charset="utf-8">

<head>
    <title>geoPath measures</title>
</head>

<style>
    body {
        font-family: "Helvetica Neue", Helvetica, sans-serif;
        font-size: 14px;
        color: #333;
    }

    #content .info {
        height: 20px;
    }

    #content .map path {
        fill: #aaa;
    }

    #content .bounding-box rect {
        display: none;
    }

    #content .centroid {
        display: none;
    }

    #content .centroid circle {
        fill: red;
    }

</style>

<body>
    <div id="content">
        <div class="info">Hover over a country</div>
        <svg width="100vw" height="100vh">
      <g class="map"></g>
      <g class="bounding-box"><rect></rect></g>
      <g class="centroid"><circle r="4"></circle></g>
    </svg>
    </div>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.9.1/d3.min.js"></script>

    <script>
        var width = window.innerWidth;
        var height = window.innerHeight;
        var f = width + height * 5;
        var projection = d3.geoMercator()
            .center([19.5, 47]) // roughly the center of Hungary
            .translate([width / 2, height / 2])
            .scale(f);

        var geoGenerator = d3.geoPath()
            .projection(projection);

        function handleMouseover(d) {

            var pixelArea = geoGenerator.area(d);
            var bounds = geoGenerator.bounds(d);
            var centroid = geoGenerator.centroid(d);
            var measure = geoGenerator.measure(d);

            d3.select('#content .info')
                .text('<p id="infotext"><b>' + d.properties.NUTS5NAME + '</b><br><br>' + d.properties.change + '</p>');

            d3.select('#content .bounding-box rect')
                .attr('x', bounds[0][0])
                .attr('y', bounds[0][1])
                .attr('width', bounds[1][0] - bounds[0][0])
                .attr('height', bounds[1][1] - bounds[0][1]);

            d3.select('#content .centroid')
                .style('display', 'inline')
                .attr('transform', 'translate(' + centroid + ')');
        }

        function handleMouseout(d) {


            d3.select('#content .info')
                .html('<p id="unseen"><b>info1</b><br>info2<br>info3<p>');

            d3.select('#content .centroid')
                .style('display', 'none');
        }


        function update(geojson) {
            var u = d3.select('#content g.map')
                .selectAll('path')
                .data(geojson.features);

            u.enter()
                .append('path')
                .attr('d', geoGenerator)
                .on('mouseover', handleMouseover)
                .on('mouseout', handleMouseout);
        }



        // REQUEST DATA
        d3.json('onklak.geojson', function(err, json) {
            update(json)
        })

    </script>
</body>

</html>
